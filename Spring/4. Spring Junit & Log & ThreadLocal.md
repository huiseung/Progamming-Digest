# 목차
- [목차](#목차)
- [Log](#log)
  - [Log Level](#log-level)
  - [Log 저장](#log-저장)
  - [로그 요구사항 예시](#로그-요구사항-예시)
- [Junit MockMvc Test](#junit-mockmvc-test)
  - [Junit5](#junit5)
    - [annotation 정리](#annotation-정리)
  - [MockMVC](#mockmvc)
    - [객체 정리](#객체-정리)

# Log
## Log Level

## Log 저장


## 로그 요구사항 예시
- [] 안에는 http request ID
- 모든 public method 호출, 응답 로그로 출력
- 로그는 비즈니스 로직과 독립
- 메서드 호출 시간 출력
- 예외 발생시 예외 정보 출력
- 메서드 호출 깊이 표현
  - 깊이 표현은 단순히 로그문을 작성하는걸로는 불가

```
정상 요청
[796bccd9] OrderController.request()
[796bccd9] |-->OrderService.orderItem()
[796bccd9] | |-->OrderRepository.save()
[796bccd9] | |<--OrderRepository.save() time=1004ms
[796bccd9] |<--OrderService.orderItem() time=1014ms
[796bccd9] OrderController.request() time=1016ms
예외 발생
[b7119f27] OrderController.request()
[b7119f27] |-->OrderService.orderItem()
[b7119f27] | |-->OrderRepository.save()
[b7119f27] | |<X-OrderRepository.save() time=0ms 
ex=java.lang.IllegalStateException: 예외 발생!
[b7119f27] |<X-OrderService.orderItem() time=10ms 
ex=java.lang.IllegalStateException: 예외 발생!
[b7119f27] OrderController.request() time=11ms 
ex=java.lang.IllegalStateException: 예외 발생!
```

- TraceId를 파라미터로 넘기는 방법 말고, HTTP 요청을 구분하고, 메서드 호출 깊이를 표현하는 방법
  - threadlocal을 이요해 동시성 문제 해결



# Junit MockMvc Test
## Junit5


### annotation 정리
- @SpringBootTest
- @AutoCOnfigureMockMvc
- 빈 의존성 주입
  - @AutoWired private 객체 인스턴스변수
- 테스트 전, 후 작업 설정 
  - @BeforeAll
  - @AfterAll
  - @BeforeEach
  - @AfterEach

- @Nested
- @DisplayName
- @Test


## MockMVC
- MockMvc란 가상에 웹 객체로, API 서버 호출을 테스트 해 볼 수 있다.
### 객체 정리
- MockMvc
  - perform
  - andExpect
    - MockMvcResultMatchers 메소드를 실행시킨다
  - andDo
    - MockMvcResultHandlers에 메소드를 실행시킨다
  - andReturn
    - MvcResult를 리턴한다
- MockMvcRequestBuiders
  - get(String url)
  - post(String url)
  - delete(String url)
  - put(String url)
  - param
  - header
  - cookie
  - content
  - accept(MediaType.APPLICATION_JSON)
  - requestAttr
  - flashAttr
  - sessionAttr
- MockMutlipartHttpServletRequestBuilder
  - file()
- MockMvcResultMatchers
  - status()
  - header()
  - cookie()
  - content()
  - view()
  - forwardedUrl()
  - redirectedUrl()
  - model()
  - flash()
  - request()
- MockMvcResultHandlers
  - log
  - print   
- MvcResult